{"version":3,"file":"script.js","sources":["main.js"],"sourcesContent":["import './main.scss'\n\n(function () {\n    'use strict';\n\n    const NOTE_NAMES = [\"c\", \"c#\", \"d\", \"d#\", \"e\", \"f\", \"f#\", \"g\", \"g#\", \"a\", \"a#\", \"b\"]\n    const baseOctaveIndex = 3 //Octave index of the lower ocatave on the keyboard\n    let octaveShift = 0\n    const SHOW_NUM_OCTAVES = 2\n    let oscType = 'sine'\n    let release = 0.45\n    let attack = 0.0\n    const whiteKeyNum = SHOW_NUM_OCTAVES * 7 + 1\n    const MAX_VOL = 0.3\n    const KEY_FREQ = {\n        \"c0\": 16.35,\n        \"c#0\": 17.32,\n        \"d0\": 18.35,\n        \"d#0\": 19.45,\n        \"e0\": 20.60,\n        \"f0\": 21.83,\n        \"f#0\": 23.12,\n        \"g0\": 24.50,\n        \"g#0\": 25.96,\n        \"a0\": 27.50,\n        \"a#0\": 29.14,\n        \"b0\": 30.87,\n        \"c1\": 32.70,\n        \"c#1\": 34.65,\n        \"d1\": 36.71,\n        \"d#1\": 38.89,\n        \"e1\": 41.20,\n        \"f1\": 43.65,\n        \"f#1\": 46.25,\n        \"g1\": 49.00,\n        \"g#1\": 51.91,\n        \"a1\": 55.00,\n        \"a#1\": 58.27,\n        \"b1\": 61.74,\n        \"c2\": 65.41,\n        \"c#2\": 69.30,\n        \"d2\": 73.42,\n        \"d#2\": 77.78,\n        \"e2\": 82.41,\n        \"f2\": 87.31,\n        \"f#2\": 92.50,\n        \"g2\": 98.00,\n        \"g#2\": 103.83,\n        \"a2\": 110.00,\n        \"a#2\": 116.54,\n        \"b2\": 123.47,\n        \"c3\": 130.81,\n        \"c#3\": 138.59,\n        \"d3\": 146.83,\n        \"d#3\": 155.56,\n        \"e3\": 164.81,\n        \"f3\": 174.61,\n        \"f#3\": 185.00,\n        \"g3\": 196.00,\n        \"g#3\": 207.65,\n        \"a3\": 220.00,\n        \"a#3\": 233.08,\n        \"b3\": 246.94,\n        \"c4\": 261.63,\n        \"c#4\": 277.18,\n        \"d4\": 293.66,\n        \"d#4\": 311.13,\n        \"e4\": 329.63,\n        \"f4\": 349.23,\n        \"f#4\": 369.99,\n        \"g4\": 392.00,\n        \"g#4\": 415.30,\n        \"a4\": 440,\n        \"a#4\": 466.16,\n        \"b4\": 493.88,\n        \"c5\": 523.25,\n        \"c#5\": 554.37,\n        \"d5\": 587.33,\n        \"d#5\": 622.25,\n        \"e5\": 659.26,\n        \"f5\": 698.46,\n        \"f#5\": 739.99,\n        \"g5\": 783.99,\n        \"g#5\": 830.61,\n        \"a5\": 880.00,\n        \"a#5\": 932.33,\n        \"b5\": 987.77,\n        \"c6\": 1046.50,\n        \"c#6\": 1108.73,\n        \"d6\": 1174.66,\n        \"d#6\": 1244.51,\n        \"e6\": 1318.51,\n        \"f6\": 1396.91,\n        \"f#6\": 1479.98,\n        \"g6\": 1567.98,\n        \"g#6\": 1661.22,\n        \"a6\": 1760.00,\n        \"a#6\": 1864.66,\n        \"b6\": 1975.53,\n        \"c7\": 2093.00,\n        \"c#7\": 2217.46,\n        \"d7\": 2349.32,\n        \"d#7\": 2489.02,\n        \"e7\": 2637.02,\n        \"f7\": 2793.83,\n        \"f#7\": 2959.96,\n        \"g7\": 3135.96,\n        \"g#7\": 3322.44,\n        \"a7\": 3520.00,\n        \"a#7\": 3729.31,\n        \"b7\": 3951.07,\n        \"c8\": 4186.01\n    };\n\n    //Node elements\n    const $keyBoard = document.querySelector('.piano__keys');\n    document.querySelector('#audio-btn');\n    const $octaveUpBtn = document.querySelector('.octave__btn-up');\n    const $octaveDownBtn = document.querySelector('.octave__btn-down');\n    const $octaveDisplay = document.querySelector('.octave__val');\n    const $oscTypeInputs = document.querySelector('.controls__osc-type-inputs');\n    const $attackRange = document.getElementById('attack')\n    const $releaseRange = document.getElementById('release')\n    document.documentElement.style.setProperty('--white-key-num', whiteKeyNum);\n\n    function onMIDIMessage(event) {\n\n        const data = event.data;\n        if (data.length !== 3) return\n\n        // status is the first byte.\n        let status = data[0];\n        // command is the four most significant bits of the status byte.\n        let command = status >>> 4;\n\n        // just look at note on and note off messages.\n        if (command === 0x9 || command === 0x8) {\n            // note number is the second byte.\n            let note = data[1];\n            // velocity is the thrid byte.\n            let velocity = data[2];\n\n            let noteOn = command === 0x9;\n\n            // calculate octave and note name.\n            let octave = Math.trunc(note / 12) - 1; //First octave index = -1\n            let noteName = NOTE_NAMES[note % 12].toLowerCase();\n\n            noteOn ? console.log('PRESSED MIDI Key', `${noteName}${octave}`, velocity) : console.log('RELEASED MIDI Key', `${noteName}${octave}`);\n\n            playKey(noteName, octave + octaveShift, noteOn ? velocity / 127 : 0);\n\n        }\n\n        //console.log('EVENT', event)\n        \"MIDI message received at timestamp \" + event.timestamp + \"[\" + event.data.length + \" bytes]: \";\n    }\n\n    function startLoggingMIDIInput(midiAccess, indexOfPort) {\n        console.log('startLoggingMIDIInput');\n        midiAccess.inputs.forEach(entry => {\n            // console.log('entry', entry)\n            entry.onmidimessage = onMIDIMessage;\n        });\n    }\n\n    if (navigator.requestMIDIAccess) {\n        navigator.requestMIDIAccess().then(midiAccess => {\n            startLoggingMIDIInput(midiAccess);\n        });\n    }\n\n    createKeys();\n\n    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();\n    let oscObject = {}\n\n    // var gain = audioCtx.createGain();\n    // const oscillator = audioCtx.createOscillator();\n    // oscillator.type = 'square';\n    // oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // value in hertz\n    // gain.gain.value = 0;\n    // oscillator.connect(gain);\n    // gain.connect(audioCtx.destination);\n    // oscillator.start();\n\n    //$audioBtn.addEventListener('click', audioBtnClicked)\n    $keyBoard.addEventListener('touchstart', e => {\n        const $clickedKey = e.target;\n        console.log('TOUCHSTART', e.target.dataset.key);\n        mousePressed($clickedKey, true);\n    });\n\n    $keyBoard.addEventListener('mousedown', e => {\n        const $clickedKey = e.target;\n        console.log('MOUSEDOWN', e.target.dataset.key);\n        mousePressed($clickedKey, true);\n    });\n\n    $keyBoard.addEventListener('mouseup', e => {\n        console.log('MOUSEUP', e.target.dataset.key);\n        const $clickedKey = e.target;\n        mousePressed($clickedKey, false);\n    });\n\n    document.body.addEventListener('touchend', e => {\n        console.log('TOUCHEND', e.target.dataset.key);\n        const $clickedKey = e.target;\n        mousePressed($clickedKey, false);\n    });\n\n    $octaveUpBtn.addEventListener('click', e => {\n        octaveShift++;\n        updateBaseOctave();\n    });\n\n    $octaveDownBtn.addEventListener('click', e => {\n        octaveShift--;\n        updateBaseOctave();\n    });\n\n    $oscTypeInputs.addEventListener('click', e => {\n        oscType = $oscTypeInputs.querySelector('input:checked').value || oscType;\n        console.log('new osc type', oscType);\n    })\n\n    $attackRange.addEventListener('change', e => {\n        const val = $attackRange.value\n        attack = parseInt(val)\n        console.log('attack changed to', val)\n    })\n\n    $releaseRange.addEventListener('change', e => {\n        const val = $releaseRange.value\n        release = parseInt(val)\n        console.log('release changed to', val)\n    })\n\n    function generateRandomId() {\n        return Math.floor(Math.random()*0xca0e373ebffff+0x05c5e45240000).toString(36)\n    }\n\n    function addOscVoice(key) {\n        // var gain = audioCtx.createGain();\n        // const oscillator = audioCtx.createOscillator();\n        // oscillator.type = 'square';\n        // oscillator.frequency.setValueAtTime(440, audioCtx.currentTime); // value in hertz\n        // gain.gain.value = 0;\n        // oscillator.connect(gain);\n        // gain.connect(audioCtx.destination);\n        // oscillator.start();\n\n        const newOsc = {\n            osc: audioCtx.createOscillator(),\n            gainNode: audioCtx.createGain(),\n            key: key\n        };\n\n        newOsc.osc.type = oscType;\n\n        newOsc.gainNode.gain.value = 0;\n        newOsc.osc.connect(newOsc.gainNode);\n        newOsc.gainNode.connect(audioCtx.destination);\n        const id = generateRandomId()\n        oscObject[id] = newOsc\n        console.log('oscObj', oscObject)\n        return id //Returns the index\n    }\n\n    function createKeys() {\n        for (let o = baseOctaveIndex; o < baseOctaveIndex + SHOW_NUM_OCTAVES; o++) {\n            console.log('octave', o);\n            console.log('note_names', NOTE_NAMES);\n            NOTE_NAMES.forEach(keyName => {\n                createSingleKey(keyName, o);\n            });\n        }\n        //Add the 'C' key at top\n        createSingleKey('c', baseOctaveIndex + SHOW_NUM_OCTAVES);\n    }\n\n    function createSingleKey(keyName, octave) {\n        console.log('keyNAme', keyName);\n        const $key = document.createElement('div');\n        $key.dataset.key = keyName.toLowerCase() + octave;\n        $key.dataset.keyname = keyName.toLowerCase();\n        $key.dataset.octave = octave;\n        $key.classList.add('piano__key');\n        $key.id = `${keyName}${octave}`;\n        console.log('last char', keyName.substr(keyName.length - 1));\n        keyName.substr(keyName.length - 1) === '#' ? $key.classList.add('is--black') : 0;\n        $keyBoard.appendChild($key);\n    }\n\n    function mousePressed($key, pressed) {\n        console.log('mousedPressed', $key.dataset.key, pressed);\n        if (!$key.dataset.key) return\n        if (!pressed) {\n            stopPlaying(`${$key.dataset.keyname}${parseInt($key.dataset.octave) + octaveShift}`);\n            return\n        }\n        console.log('notename', $key.dataset.keyname, 'ocateve', parseInt($key.dataset.octave) + octaveShift);\n        playKey($key.dataset.keyname, parseInt($key.dataset.octave) + octaveShift, pressed ? 1 : 0);\n    }\n\n    function stopPlaying(key) {\n        console.log('STOP playing key', key);\n        let oscId = undefined\n        Object.keys(oscObject).forEach(id => {\n            if (oscObject[id].key === key && !oscObject[id].release){\n                oscId = id\n            }\n        })\n        if (oscId === undefined) {\n            console.error('Osc Index not found for ' + key);\n            return\n        }\n        oscObject[oscId].gainNode.gain.linearRampToValueAtTime(0.0001, audioCtx.currentTime + release);\n        oscObject[oscId].release = true\n        setTimeout(() => {\n            oscObject[oscId].osc.stop();\n            console.log('REMOVE OSC');\n            delete oscObject[oscId]\n            console.log('new stop oscObj', JSON.stringify(oscObject));\n        }, release * 1000)\n\n        const htmlKeyId = key.slice(0,key.length - 1) + (parseInt(key.slice(key.length - 1,key.length)) - octaveShift)\n        console.log('key', key, 'octaveShift', octaveShift, 'htmlKeyId', htmlKeyId)\n        document.querySelector(`.piano__key[data-key='${htmlKeyId}']`)?.classList.remove('is--pressed');\n    }\n\n    function playKey(keyName, octave, velocity) {\n        const keyboardKey = `${keyName}${octave - octaveShift}`;\n        const key = `${keyName}${octave}`\n        if (!KEY_FREQ[key]) return\n        if (velocity === 0) {\n            stopPlaying(key);\n            return\n        }\n        const freq = KEY_FREQ[key];\n        const $key = document.getElementById(keyboardKey);\n        console.log('playKey', 'key', key, 'keyboardKey', keyboardKey, velocity, freq);\n\n        $key?.classList.toggle('is--pressed', velocity > 0);\n        if (velocity === 0) return\n        const oscId = addOscVoice(key);\n\n        oscObject[oscId].osc.start();\n        oscObject[oscId].osc.frequency.value = freq;\n\n        if (velocity > 1) {\n            velocity = 1;\n        }\n        oscObject[oscId].gainNode.gain.linearRampToValueAtTime( MAX_VOL * velocity, audioCtx.currentTime + attack);\n        // gain.gain.value = MAX_VOL * velocity;\n        console.log('new play oscObj', oscObject[oscId], JSON.stringify(oscObject));\n    }\n\n    function updateBaseOctave() {\n        $octaveDisplay.innerText = octaveShift;\n    }\n\n})();\n//# sourceMappingURL=main.js.map\n"],"names":[],"mappings":"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"}